# Migration `20200822140620-add-sqlite`

This migration has been generated by Dennis Zimmermann at 8/22/2020, 4:06:20 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "Drawing" (
    "id" TEXT NOT NULL,
    "createdAt" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" DATETIME NOT NULL,
    "authorId" TEXT,
    "name" TEXT NOT NULL,

FOREIGN KEY ("authorId") REFERENCES "User"("id") ON DELETE SET NULL ON UPDATE CASCADE,
PRIMARY KEY ("id")
)

CREATE TABLE "Item" (
    "id" TEXT NOT NULL,
    "createdAt" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" DATETIME NOT NULL,
    "drawingName" TEXT NOT NULL,
    "authorId" TEXT,
    "name" TEXT NOT NULL,
    "type" TEXT NOT NULL,
    "data" TEXT NOT NULL,

FOREIGN KEY ("drawingName") REFERENCES "Drawing"("id") ON DELETE CASCADE ON UPDATE CASCADE,
FOREIGN KEY ("authorId") REFERENCES "User"("id") ON DELETE SET NULL ON UPDATE CASCADE,
PRIMARY KEY ("id")
)

CREATE TABLE "User" (
    "id" TEXT NOT NULL,
    "createdAt" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" DATETIME NOT NULL,
    "email" TEXT NOT NULL,
    "password" TEXT NOT NULL,
    "firstname" TEXT,
    "lastname" TEXT,
    "role" TEXT NOT NULL,
PRIMARY KEY ("id")
)

CREATE UNIQUE INDEX "Drawing.name_unique" ON "Drawing"("name")

CREATE UNIQUE INDEX "Item.name_unique" ON "Item"("name")

CREATE UNIQUE INDEX "User.email_unique" ON "User"("email")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200820152710..20200822140620-add-sqlite
--- datamodel.dml
+++ datamodel.dml
@@ -2,10 +2,10 @@
   provider = "prisma-client-js"
 }
 datasource db {
-  provider = "postgresql"
-  url = "***"
+  provider = "sqlite"
+  url = "***"
 }
 model Drawing {
   id            String   @default(cuid()) @id
@@ -25,9 +25,9 @@
   drawing       Drawing  @relation(fields: [drawingName], references: [id])
   authorId      String?
   author        User?    @relation(fields: [authorId], references: [id])
   name          String   @unique
-  type          ItemType
+  type          String
   data          String
 }
 model User {
@@ -37,17 +37,7 @@
   email         String    @unique
   password      String
   firstname     String?
   lastname      String?
-  role          Role
+  role          String
   drawings      Drawing[]
 }
-
-enum ItemType {
-  GROUP
-  LAYER
-  PATH
-}
-
-enum Role {
-  USER
-}
```


